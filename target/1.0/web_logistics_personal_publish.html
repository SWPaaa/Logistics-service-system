<!doctype html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>小万物流服务信息平台</title>
    <meta name="Keywords" content="物流服务">
    <meta name="Description" content="小万物流服务信息平台门户网站">
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/carousel.css">

</head>
<body>
<!--welcome-->
<div style="height: 30px;width: 100%;
line-height:30px;color: black;text-align: center;font-size: 18px">
    <p id="welcome_p"></p>
</div>

<!--通栏导航-->
<div class="nav">
    <!--nav内容-->
    <div class="nav_content">
        <!--logo-->
        <div class="nav_logo">
            <a href="web.html" title="小万物流服务信息平台">
                <img src="http://localhost:8080/images/logo.png" width="440px" height="104px" alt="logo">
                <p >小 万 物 流</p>
            </a>
        </div>
        <!--logo end-->
        <!--nav主题-->
        <ul class="nav_ul" id="nav_ul">
            <li>
                <a href="web.html">
                    <span class="one">HOME</span>
                    <span class="two">首 页</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <span class="one">物流资讯</span>
                    <span class="two">LOGISTICS</span>
                </a>
                <ul class="nav_erji">
                    <li><a href="web_logistics_search.html">车辆查询</a></li>
                    <li><a href="web_logistics_search.html">路线查询</a></li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <span class="one">商品资讯</span>
                    <span class="two">COMMODITY</span>
                </a>
                <ul class="nav_erji">
                    <li><a href="web_commodity_search.html">货物查询</a></li>
                    <li><a href="web_commodity_search.html">路线查询</a></li>
                </ul>
            </li>
            <li id="nav_li2">
                <a href="#"  id="nav_cx">
                    <span class="one">企业资讯</span>
                    <span class="two">ENTERPRISE</span>
                </a>
                <ul class="nav_erji">
                    <li><a href="javascript:void(0)">物流企业</a></li>
                    <li><a href="javascript:void(0)">商品企业</a></li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <span class="one">新闻中心</span>
                    <span class="two">NEWS</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <span class="one">联系我们</span>
                    <span class="two">CONTACT</span>
                </a>
                <ul class="nav_erji">
                    <li><a href="#xb">联系我们</a></li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <span class="one">个人中心</span>
                    <span class="two">PERSONAGE</span>
                </a>
                <ul class="nav_erji" id="personal-center">

                </ul>
            </li>
        </ul>
        <!--nav主题 end-->
    </div>
    <!--nav内容 end-->
</div>
<!--通栏导航 end-->

<h4 style="margin-left: 30%;margin-top: 30px">当前位置：个人中心→物流发布</h4>
<h5 style="margin-left: 30%;margin-bottom: 50px"> ----------------------------------------------------------------------------------------------------</h5>
<div style="height: 500px;min-width: 900px;margin-left: 40%;">
    <form name="logistics" id="logistics" contentType = multipart/form-data >

        <div style="margin-top: 10px">
            选择车辆：
            <span style="color: red">*</span>
            <select name="car_type" id="car_type">
                <option disabled="disabled" selected="selected">车辆编号</option>
            </select>
        </div>
        <div>
            物流路线：
            <span style="color: red">*</span>
            <select name="area_code_original" id="area_code_original">
                <option disabled="disabled" selected="selected">起始地</option>
            </select>
            <select name="area_code_destination" id="area_code_destination">
                <option disabled="disabled" selected="selected">目的地</option>
            </select>
        </div>

        <div style="margin-top: 10px">
            截止日期：
            <span style="color: red">*</span>
            <input type="date" id="data">
        </div>

        <div style="margin-top: 10px">
            途径区域：
            <span style="color: red">*</span>
            <div  class="td_input" style="display: inline-block">
                <input type="text" name="pass_area" id="pass_area">
            </div>
        </div>

        <div style="margin-top: 10px">
            付款方式：
            <span style="color: red">*</span>
            <select name="payment_method" id="payment_method">
                <option value="0">到付</option>
                <option value="1">押金</option>
                <option value="2">全款</option>
            </select>
        </div>

        <div style="margin-top: 10px">
            是否提供上门服务：
            <span style="color: red">*</span>
            <select name="service" id="service">
                <option value="1">是</option>
                <option value="0">否</option>
            </select>
        </div>

        <div style="margin-top: 10px">
            货运状态：
            <span style="color: red">*</span>
            <select name="status" id="status">
                <option value="0">待货</option>
                <option value="1">已有货</option>
            </select>
        </div>

        <div style="margin-top: 10px">
            返程车：
            <span style="color: red">*</span>
            <select name="go_back" id="go_back">
                <option value="1">是</option>
                <option value="0">否</option>
            </select>
        </div>

        <div style="margin-top: 10px">
            货物类型：
            <span style="color: red">*</span>
            <select name="type" id="type">
                <option value="0">电询</option>
                <option value="1">不限</option>
            </select>
        </div>

        <div style="margin-top: 10px">
            价格：
            <span style="color: red">*</span>
            <input type="text" name="price" id="price">
            <select name="price_way" id="price_way">
                <option value="0">元/车</option>
                <option value="1">元/立方米</option>
            </select>
        </div>

        <input style="margin-top: 30px;margin-left: 20px;width: 100px;
height: 30px" type="button" onclick="btnClick2()" value="提 交" class="reg_btn">

        </table>
    </form>
</div>

<!--下标链接-->
<div class="xb" id="xb">
    <div class="xb_nr">
        <ul class="xb_ul">
            <li><a href="javascript:void(0)">
                <span class="xb_1">公司展示</span>
                <span>公司简历</span>
                <span>资质荣誉</span>
                <span>领导致辞</span>
                <span>企业文化</span>
            </a></li>
            <li><a href="javascript:void(0)">
                <span class="xb_1">图片中心</span>
                <span>厂容厂貌</span>
            </a></li>
            <li><a href="javascript:void(0)">
                <span class="xb_1">最新咨讯</span>
                <span>公司新闻</span>
                <span>媒体报道</span>
            </a></li>
        </ul>
        <ol class="xb_ol">
            <li class="xb_ol_1">联系方式</li>
            <li class="xb_ol_2">17784340244</li>
            <li>公司地址：重庆市巴南区重庆工程学院小万物流服务公司</li>
            <li>办公室：0432-66528710</li>
            <li>销售部：0432-66528716</li>
            <li>传 &nbsp; &nbsp;真：0432-66528716 &nbsp; 0432-66528710</li>
        </ol>
    </div>
    <p>版权所有：重庆市巴南区重庆工程学院 </p>
</div>
<!--下标链接 end-->

<script src="js/lss1.js"></script>
<script type="text/javascript" src="js/web.js"></script>
<script src="js/jquery-1.12.4.min.js"></script>
<script src="js/jquery.js"></script>
<script>
    var welcome_p = document.getElementById("welcome_p");
    welcome_p.innerText = window.localStorage.getItem("name")+"   欢迎您!";
    var user;
    /**
     * 0.获取车辆编号
     * 1.获取省市
     */
    window.onload = function(){
        // 获取车辆编号
        $.ajax({
            url: "http://localhost:8080/api/v1/car/"+window.localStorage.getItem("userId"), success: function (result) {
                if (result != null) {
                    user = result.data;
                    console.info(result.data);
                    for(let i=0;i<result.data.length;i++){
                        console.info(result.data[i])
                        console.info(result.data[i].name)
                        var  varItem = new Option(result.data[i].name, result.data[i].id);
                        document.getElementById("car_type").options.add(varItem);
                    }
                }
            }
        });
        // 取省市
        $.ajax({
            url: "/api/v1/area/all", success: function (result) {
                if (result != null) {
                    $.each(result, function (i, item) {
                        var  varItem1 = new Option(item.name, item.code);
                        var  varItem2 = new Option(item.name, item.code);
                        document.getElementById("area_code_original").options.add(varItem1);
                        document.getElementById("area_code_destination").options.add(varItem2);
                    });
                }
            }
        });
    }
    /**
     *  2.提交
     **/
    function btnClick2() {
        var form = document.getElementById("logistics");
        var formData = {
            "carId" : form.car_type.value,
            "areaCodeOriginal" : form.area_code_original.value,
            "areaCodeDestination" : form.area_code_destination.value,
            "data" : form.data.value,
            "passArea" : form.pass_area.value,
            "paymentMethod" : form.payment_method.value,
            "service" : form.service.value,
            "status" : form.status.value,
            "goBack" : form.go_back.value,
            "type" : form.type.value,
            "price" : form.price.value,
            "priceWay" : form.price_way.value,
            "userId" : window.localStorage.getItem("userId")
        }
        $.ajax({
            type: "POST",
            url: "/api/v1/userCar",
            contentType: "application/json;charset=utf-8",
            data:JSON.stringify(formData),
            dataType: "json",
            success:function (message) {
                alert("提交成功");
            },
            error:function (message) {
                alert("提交失败");
            }
        });
    }

</script>

</body>
</html>


















